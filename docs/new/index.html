<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asa - Home</title>
    <script src="search-index.js"></script>
    <script>
        // Apply theme immediately before rendering to prevent flash
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark-theme');
            }
        })();
    </script>
    <style>
        /* Page layout */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        .page-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .header-container {
            flex-shrink: 0;
        }

        .content-wrapper {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .sidebar-container {
            width: 15rem;
            flex-shrink: 0;
            overflow-y: auto;
            border-right: 1px solid var(--divider-border);
        }

        .main-content {
            flex: 1;
            overflow-y: auto;
        }

        /* Common variables */
        :root {
            --page-bg: #FFFFFF;
            --divider-border: #F1F1F1;
            --content-bg: #FFFFFF;
            --content-text: #000000;
            --button-bg: #0D0D0D;
            --button-text: #FFFFFF;
            --button-hover-bg: #2A2A2A;
        }

        html.dark-theme,
        body.dark-theme {
            --page-bg: #1E1E1E;
            --divider-border: #2B2B2B;
            --content-bg: #1E1E1E;
            --content-text: #E0E0E0;
            --button-bg: #FFFFFF;
            --button-text: #0D0D0D;
            --button-hover-bg: #E0E0E0;
        }

        body {
            font-family: "DejaVu Sans", arial, sans-serif;
            background-color: var(--page-bg);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .home-content {
            max-width: 800px;
            text-align: center;
        }

        .home-logo {
            width: 300px;
            height: 300px;
            object-fit: contain;
            margin-bottom: 2rem;
        }

        .home-description {
            font-size: 1.2rem;
            line-height: 1.8;
            color: var(--content-text);
            margin-bottom: 2rem;
            transition: color 0.3s ease;
        }

        .github-button {
            display: inline-block;
            padding: 0.75rem 2rem;
            background-color: var(--button-bg);
            color: var(--button-text);
            text-decoration: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            transition: background-color 0.2s ease, color 0.3s ease;
        }

        .github-button:hover {
            background-color: var(--button-hover-bg);
        }

        /* Scrollbar styling for dark theme */
        html.dark-theme::-webkit-scrollbar,
        body.dark-theme::-webkit-scrollbar {
            width: 12px;
        }

        html.dark-theme::-webkit-scrollbar-track,
        body.dark-theme::-webkit-scrollbar-track {
            background: #0d1117;
        }

        html.dark-theme::-webkit-scrollbar-thumb,
        body.dark-theme::-webkit-scrollbar-thumb {
            background: #30363d;
            border-radius: 6px;
        }

        html.dark-theme::-webkit-scrollbar-thumb:hover,
        body.dark-theme::-webkit-scrollbar-thumb:hover {
            background: #484f58;
        }

        /* Firefox scrollbar */
        html.dark-theme,
        body.dark-theme {
            scrollbar-width: thin;
            scrollbar-color: #30363d #0d1117;
        }
    </style>
</head>
<body>
<div class="page-container">
    <!-- Header -->
    <div class="header-container">
<div class="header">
    <a href="index.html" class="header-link">
        <div class="header-content">
            <img src="https://github.com/Asa-Programming-Language/Asa/blob/main/media/ASA-medium.png?raw=true" alt="Asa Logo" class="logo">
            <div class="title-container">
                <h1 class="title">Asa</h1>

                <div class="subtitle">Standard Library Documentation</div>

            </div>
        </div>
    </a>
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme" title="Toggle light/dark theme">
        <svg class="theme-icon sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/>
            <line x1="12" y1="1" x2="12" y2="3"/>
            <line x1="12" y1="21" x2="12" y2="23"/>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
            <line x1="1" y1="12" x2="3" y2="12"/>
            <line x1="21" y1="12" x2="23" y2="12"/>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        <svg class="theme-icon moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
    </button>
</div>

<style>
:root {
    //--header-bg: #1a1a1a;
    //--header-border: #DDDDDD;
    //--header-title: #1A1A1A;
    //--header-subtitle: #505050;
    //--toggle-btn-bg: rgba(0, 0, 0, 0.05);
    //--toggle-btn-hover: rgba(0, 0, 0, 0.1);
    //--toggle-btn-color: #1A1A1A;
    --header-bg: #0D0D0D;
    --header-border: #FFFFFF;
    --header-title: #FFFFFF;
    --header-subtitle: #C8C8C8;
    --toggle-btn-bg: rgba(255, 255, 255, 0.1);
    --toggle-btn-hover: rgba(255, 255, 255, 0.2);
    --toggle-btn-color: #FFFFFF;
}

html.dark-theme,
body.dark-theme {
    --header-bg: #0D0D0D;
    --header-border: #FFFFFF;
    --header-title: #FFFFFF;
    --header-subtitle: #C8C8C8;
    --toggle-btn-bg: rgba(255, 255, 255, 0.1);
    --toggle-btn-hover: rgba(255, 255, 255, 0.2);
    --toggle-btn-color: #FFFFFF;
}

body {
    margin: 0;
    padding: 0;
    transition: background-color 0.3s ease;
}

.header {
    background-color: var(--header-bg);
    border-bottom: 2px solid var(--header-border);
    margin: 0;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

.header-link {
    text-decoration: none;
    display: block;
    color: inherit;
    flex: 1;
    padding: 0;
}

.header-link:hover .logo {
    opacity: 0.8;
}

.header-link:hover .title,
.header-link:hover .subtitle {
    opacity: 0.9;
}

.header-content {
    display: flex;
    align-items: center;
    gap: 13px;
    margin: 0;
    padding: 0;
}

.logo {
    width: 60px;
    height: 60px;
    object-fit: contain;
    flex-shrink: 0;
}

.title-container {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.title {
    font-family: "Futura Bold", "Futura", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    font-weight: bold;
    font-size: 22pt;
    color: var(--header-title);
    margin: 0;
    line-height: 90%;
    transition: opacity 0.2s, color 0.3s ease;
}

.subtitle {
    font-family: "Futura Bold", "Futura", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    font-weight: bold;
    font-size: 10pt;
    color: var(--header-subtitle);
    margin-top: 0.25rem;
    line-height: 90%;
    transition: opacity 0.2s, color 0.3s ease;
}

.theme-toggle {
    background: var(--toggle-btn-bg);
    border: none;
    border-radius: 8px;
    width: 40px;
    height: 40px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--toggle-btn-color);
    transition: background-color 0.2s ease, color 0.3s ease;
    flex-shrink: 0;
    margin: 0.7rem;
}

.theme-toggle:hover {
    background: var(--toggle-btn-hover);
}

.theme-icon {
    transition: opacity 0.3s ease;
}

.moon-icon {
    display: block;
}

.sun-icon {
    display: none;
}

body.dark-theme .moon-icon {
    display: none;
}

body.dark-theme .sun-icon {
    display: block;
}
</style>

<script>
// Sync theme from html to body (html was set by blocking script at top)
if (document.documentElement.classList.contains('dark-theme')) {
    document.body.classList.add('dark-theme');
}

// Toggle theme
function toggleTheme() {
    const isDark = document.body.classList.toggle('dark-theme');
    document.documentElement.classList.toggle('dark-theme', isDark);
    const theme = isDark ? 'dark' : 'light';
    localStorage.setItem('theme', theme);

    // Dispatch custom event to notify the page
    window.dispatchEvent(new CustomEvent('themeChange', {
        detail: { theme: theme }
    }));
}

// Add click handler to toggle button
document.addEventListener('DOMContentLoaded', function() {
    const toggleBtn = document.getElementById('theme-toggle');
    if (toggleBtn) {
        toggleBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            toggleTheme();
        });
    }
});
</script>

    </div>

    <!-- Content Wrapper -->
    <div class="content-wrapper">
        <!-- Sidebar -->
        <div class="sidebar-container">
<style>
    :root {
        --sidebar-bg: #E0E0E0;
        --sidebar-link: #606060;
        --sidebar-link-hover: #EEEEEE;
        --sidebar-link-active: #FFFFFF;
        --search-bg: #F5F5F5;
        --search-border: #C0C0C0;
        --search-text: #000000;
        --search-result-hover: #EEEEEE;
    }

    html.dark-theme,
    body.dark-theme {
        --sidebar-bg: #0c0c0c;
        --sidebar-link: #C8C8C8;
        --sidebar-link-hover: #3A3A3A;
        --sidebar-link-active: #212121;
        --search-bg: #1A1A1A;
        --search-border: #404040;
        --search-text: #E0E0E0;
        --search-result-hover: #2A2A2A;
    }

    .sidebar-container {
        background-color: var(--sidebar-bg);
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    .sidebar-container::-webkit-scrollbar {
        display: none;
    }

    .search-container {
        padding: 0.75rem;
        border-bottom: 1px solid var(--search-border);
        width: 100%;
    }

    .search-box {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid var(--search-border);
        border-radius: 4px;
        background-color: var(--search-bg);
        color: var(--search-text);
        font-family: "DejaVu Sans", arial, sans-serif;
        font-size: 9.5pt;
        transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    }

    .search-box:focus {
        outline: none;
        border-color: var(--sidebar-link);
    }

    .search-results {
        display: none;
        max-height: 300px;
        overflow-y: auto;
        background-color: var(--sidebar-bg);
        border-bottom: 1px solid var(--search-border);
        width: 100%;
    }

    .search-results.visible {
        display: block;
    }

    .search-result-item {
        padding: 0.5rem 0.75rem;
        cursor: pointer;
        border-bottom: 1px solid var(--search-border);
        transition: background-color 0.2s ease;
    }

    .search-result-item:hover {
        background-color: var(--search-result-hover);
    }

    .search-result-name {
        font-weight: bold;
        color: var(--sidebar-link);
        font-size: 9.5pt;
    }

    .search-result-type {
        font-size: 8pt;
        color: var(--sidebar-link);
        opacity: 0.7;
        margin-left: 0.5rem;
    }

    .search-result-parent {
        font-size: 8.5pt;
        color: var(--sidebar-link);
        opacity: 0.6;
        margin-top: 0.2rem;
    }

    .no-results {
        padding: 0.75rem;
        color: var(--sidebar-link);
        font-size: 9pt;
        text-align: center;
    }

    .namespace-nav {
        padding: 0;
        width: 100%;
    }

    .namespace-list {
        list-style: none;
        padding: 0;
        margin: 0;
        width: 100%;
    }

    .namespace-item {
        margin: 0;
        width: 100%;
    }

    .namespace-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
    }

    .namespace-link {
        color: var(--sidebar-link);
        text-decoration: none;
        padding: 0.15rem 0.75rem 0.25rem 1.25rem;
        display: block;
        transition: background-color 0.2s, color 0.3s ease;
        width: 100%;
    }

    .namespace-link:hover {
        background-color: var(--sidebar-link-hover);
        text-decoration: none;
    }

    .namespace-link.active {
        background-color: var(--sidebar-link-active);
        font-weight: bold;
    }

    .namespace-children {
        list-style: none;
        padding: 0;
        margin: 0;
        display: none;
        width: 100%;
    }

    .namespace-children.expanded {
        display: block;
    }

    .namespace-children .namespace-link {
        padding-left: 2.5rem;
        font-size: 9.5pt;
    }

    .namespace-children .namespace-children .namespace-link {
        padding-left: 3.75rem;
    }

    .namespace-children .namespace-children .namespace-children .namespace-link {
        padding-left: 5rem;
    }

    .namespace-children .namespace-children .namespace-children .namespace-children .namespace-link {
        padding-left: 6.25rem;
    }

    .namespace-children .namespace-children .namespace-children .namespace-children .namespace-children .namespace-link {
        padding-left: 7.5rem;
    }
</style>

<div class="search-container">
    <input type="text" class="search-box" id="doc-search" placeholder="Search documentation..." />
</div>

<div class="search-results" id="search-results"></div>

<nav class="namespace-nav">
    <ul class="namespace-list">

            <li class="namespace-item" data-namespace="Print">
                <div class="namespace-header">
                    <a href="Print.html" class="namespace-link" data-ns-name="Print">Print</a>
                </div>

            </li>


            <li class="namespace-item" data-namespace="Casts">
                <div class="namespace-header">
                    <a href="Casts.html" class="namespace-link" data-ns-name="Casts">Casts</a>
                </div>

            </li>


            <li class="namespace-item" data-namespace="Operators">
                <div class="namespace-header">
                    <a href="Operators.html" class="namespace-link" data-ns-name="Operators">Operators</a>
                </div>

            </li>


            <li class="namespace-item" data-namespace="Memory">
                <div class="namespace-header">
                    <a href="Memory.html" class="namespace-link" data-ns-name="Memory">Memory</a>
                </div>

            </li>


            <li class="namespace-item" data-namespace="String">
                <div class="namespace-header">
                    <a href="String.html" class="namespace-link" data-ns-name="String">String</a>
                </div>

            </li>


            <li class="namespace-item" data-namespace="ColorPrint">
                <div class="namespace-header">
                    <a href="ColorPrint.html" class="namespace-link" data-ns-name="ColorPrint">ColorPrint</a>
                </div>

                <ul class="namespace-children">

            <li class="namespace-item" data-namespace="Fore">
                <div class="namespace-header">
                    <a href="Fore.html" class="namespace-link" data-ns-name="Fore">Fore</a>
                </div>

                <ul class="namespace-children">

            <li class="namespace-item" data-namespace="TestInsideFore">
                <div class="namespace-header">
                    <a href="TestInsideFore.html" class="namespace-link" data-ns-name="TestInsideFore">TestInsideFore</a>
                </div>

            </li>


                </ul>

            </li>


            <li class="namespace-item" data-namespace="Back">
                <div class="namespace-header">
                    <a href="Back.html" class="namespace-link" data-ns-name="Back">Back</a>
                </div>

            </li>


                </ul>

            </li>


            <li class="namespace-item" data-namespace="Window">
                <div class="namespace-header">
                    <a href="Window.html" class="namespace-link" data-ns-name="Window">Window</a>
                </div>

            </li>


    </ul>
</nav>

<script>
(function() {
    const currentModule = '';

    // Function to set active page
    function setActivePage(pageName) {
        // Remove all active states
        document.querySelectorAll('.namespace-link').forEach(l => {
            l.classList.remove('active');
        });

        // Find the link with matching data-ns-name
        const targetLink = document.querySelector('.namespace-link[data-ns-name="' + pageName + '"]');
        if (!targetLink) return;

        // Add active state to the link
        targetLink.classList.add('active');

        // Find the item
        const item = targetLink.closest('.namespace-item');

        // Expand all parent namespaces
        let currentElement = item;
        while (currentElement) {
            const parentList = currentElement.parentElement;
            if (parentList && parentList.classList.contains('namespace-children')) {
                parentList.classList.add('expanded');
            }
            currentElement = parentList ? parentList.closest('.namespace-item') : null;
        }

        // If this namespace has children, expand them
        const childrenList = item.querySelector(':scope > .namespace-children');
        if (childrenList) {
            childrenList.classList.add('expanded');
        }

        // Collapse other namespaces that aren't in our hierarchy
        document.querySelectorAll('.namespace-children').forEach(children => {
            const parent = children.parentElement;

            // Check if this is in our active hierarchy
            let isInHierarchy = false;
            let checkElement = item;
            while (checkElement) {
                if (checkElement.contains(children) || children.contains(checkElement)) {
                    isInHierarchy = true;
                    break;
                }
                const parentList = checkElement.parentElement;
                checkElement = parentList ? parentList.closest('.namespace-item') : null;
            }

            if (!isInHierarchy) {
                // Check if any of this parent's children are active
                const hasActiveChild = children.querySelector('.namespace-link.active');
                if (!hasActiveChild) {
                    children.classList.remove('expanded');
                }
            }
        });
    }

    // Set active on page load
    if (currentModule) {
        setTimeout(function() {
            setActivePage(currentModule);
        }, 10);
    }

    // Search functionality
    const searchBox = document.getElementById('doc-search');
    const searchResults = document.getElementById('search-results');
    const namespaceNav = document.querySelector('.namespace-nav');

    // Debounce function to limit search frequency
    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }

    // Perform search
    function performSearch(query) {
        query = query.trim().toLowerCase();

        if (query.length === 0) {
            searchResults.classList.remove('visible');
            searchResults.innerHTML = '';
            namespaceNav.style.display = 'block';
            return;
        }

        // Check if SEARCH_INDEX is available
        if (typeof SEARCH_INDEX === 'undefined') {
            console.error('Search index not loaded');
            return;
        }

        // Filter results
        const results = SEARCH_INDEX.filter(item => {
            const nameMatch = item.name.toLowerCase().includes(query);
            const parentMatch = item.parent && item.parent.toLowerCase().includes(query);
            const descMatch = item.description && item.description.toLowerCase().includes(query);
            return nameMatch || parentMatch || descMatch;
        });

        // Sort results by relevance (exact matches first, then starts with, then contains)
        results.sort((a, b) => {
            const aName = a.name.toLowerCase();
            const bName = b.name.toLowerCase();

            if (aName === query && bName !== query) return -1;
            if (bName === query && aName !== query) return 1;

            if (aName.startsWith(query) && !bName.startsWith(query)) return -1;
            if (bName.startsWith(query) && !aName.startsWith(query)) return 1;

            return aName.localeCompare(bName);
        });

        // Display results
        if (results.length === 0) {
            searchResults.innerHTML = '<div class="no-results">No results found</div>';
            searchResults.classList.add('visible');
            namespaceNav.style.display = 'none';
        } else {
            let html = '';
            results.slice(0, 20).forEach(item => {
                html += '<div class="search-result-item" data-page="' + item.page + '">';
                html += '  <div class="search-result-name">' + item.name;
                html += '    <span class="search-result-type">' + item.type + '</span>';
                html += '  </div>';
                if (item.parent) {
                    html += '  <div class="search-result-parent">in ' + item.parent + '</div>';
                }
                html += '</div>';
            });
            searchResults.innerHTML = html;
            searchResults.classList.add('visible');
            namespaceNav.style.display = 'none';

            // Add click handlers to results
            document.querySelectorAll('.search-result-item').forEach(item => {
                item.addEventListener('click', function() {
                    const page = this.getAttribute('data-page');
                    window.location.href = page;
                });
            });
        }
    }

    // Add search event listener with debounce
    searchBox.addEventListener('input', debounce(function(e) {
        performSearch(e.target.value);
    }, 300));

    // Clear search when box is cleared
    searchBox.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            searchBox.value = '';
            searchResults.classList.remove('visible');
            searchResults.innerHTML = '';
            namespaceNav.style.display = 'block';
        }
    });
})();
</script>

        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="home-content">


                <p class="home-description">Welcome to the Asa Standard Library documentation. 
Browse the modules on the left to explore the built-in functions and types that make up the Asa programming language.
</p>


                <a href="https://github.com/Asa-Programming-Language/Asa" class="github-button" target="_blank" rel="noopener noreferrer">View on GitHub</a>

            </div>
        </div><!-- .main-content -->
    </div><!-- .content-wrapper -->
</div><!-- .page-container -->

<script>
// Sync theme from html to body (html was set by blocking script in head)
if (document.documentElement.classList.contains('dark-theme')) {
    document.body.classList.add('dark-theme');
}
</script>
</body>
</html>
